<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/html">
<head>
	<style type="text/css">
		body{ cursor:url("/public/mouse/AppStarting.ani"),default}
	</style>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
	<meta name="description" content="">
	<meta name="author" content="">

	<title>Datalysis</title>

	<!-- Bootstrap core CSS -->
	<link href="/bootstrap/css/bootstrap.min.css" rel="stylesheet">

	<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
	<script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
	<script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
	<![endif]-->

</head>

<body>

<!-- Fixed navbar -->
<nav class="navbar navbar-default navbar-fixed-top">
	<div class="container">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="./">Datalysis</a>
		</div>
		<div id="navbar" class="navbar-collapse collapse">
			<ul class="nav navbar-nav">
				<li><a href="/">首页</a></li>
				<li class="active"><a href="#">我的数据</a></li>
				<li><a href="/dataAnalysis">数据分析</a></li>
				<li class="dropdown">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Dropdown <span class="caret"></span></a>
					<ul class="dropdown-menu">
						<li><a href="#">Action</a></li>
						<li><a href="#">Another action</a></li>
						<li><a href="#">Something else here</a></li>
						<li role="separator" class="divider"></li>
						<li class="dropdown-header">Nav header</li>
						<li><a href="#">Separated link</a></li>
						<li><a href="#">One more separated link</a></li>
					</ul>
				</li>
			</ul>
			<ul class="nav navbar-nav navbar-right">
				<li><a href="#" th:utext="#{index.welcome(${username})}" th:if="${username}">欢迎信息</a></li>
				<li><a href="/logout" th:if="${username}" onclick="alert('退出成功')">退出</a> </li>
				<li><a href="/login" th:unless="${username}">注册/登录</a></li>
			</ul>
		</div><!--/.nav-collapse -->
	</div>
</nav>

<div class="container-fluid">
	<div class="jumbotron">
		<div class="row page-header">
			<div class="col-md-1">
				<strong class="text-left">数据源</strong>
			</div>
			<div class="col-md-1">
				<button type="button" class="btn btn-info btn-xs" data-toggle="modal" data-target="#addFile">
					<span class="glyphicon glyphicon-plus" aria-hidden="true"></span><!-- 添加文件图标 -->
				</button>
				<!--<button type="button" class="btn btn-info btn-xs"  data-toggle="modal" data-target="#delFile">-->
				<!--<span class="glyphicon glyphicon-minus" aria-hidden="true"></span>&lt;!&ndash; 删除文件图标 &ndash;&gt;-->
				<!--</button>-->
				<a th:if="${username}"><button type="submit" class="btn btn-danger btn-xs" onclick="batchDelete()"><span class="glyphicon glyphicon-minus" aria-hidden="true"></span><!-- 删除文件图标 --></button></a>
			</div>


		</div><!-- row -->
		<div class="row">
			<table class="table table-hover text-center">
				<thead>
				<tr class="info">
					<th class="text-center">选项</th>
					<th class="text-center">序号</th>
					<th class="text-center">名称</th>
					<th class="text-center">类型</th>
					<th class="text-center">上传时间</th>
					<th class="text-center">操作</th>
				</tr>
				</thead>
				<tbody>
				<tr class="active" th:each="obj,objStat:${filelist}">
					<td><input type="checkbox" id="subcheck" name="subcheck" th:value="${obj.getFilename()}"></td>
					<td th:text="${objStat.count}"></td>
					<td th:text="${obj.getFilename()}"></td>
					<td th:text="${obj.getFiletype()}"></td>
					<td th:text="${obj.getUpload_time()}"></td>
					<td>
                        <a th:href="@{'/static/'+${obj.getUsername()}+'/'+${obj.getFilename()}}" target="_blank">
                            <button type="button" id="readfile" name="btn" class="btn btn-info" onclick="read(this)">查看</button>
                        </a>
					</td>
				</tr>
				</tbody>
			</table>
		</div><!-- row -->
		<div class="row">
			<div class="col-md-3">
				<strong><big th:text="'共' + ${totalfile} + '条数据'"></big></strong>
					<strong><big th:text="'共' + ${totalpage} + '页'"></big></strong>
			</div>
			<div class="col-md-6">
				<nav aria-label="Page navigation">
					<ul class="pagination">
						<li>
							<a th:if="${currentPage == 1}" href="javascript:void (0)" aria-label="Previous">
								<span aria-hidden="true">&laquo;</span>
							</a>
							<a th:if="${currentPage != 1}" th:href="@{'/userdata/page'+ ${previousPage}}" aria-label="Previous">
								<span aria-hidden="true">&laquo;</span>
							</a>
						</li>
							<li  th:each="i:${#numbers.sequence(1,totalpage)}">
								<a th:href="'/userdata/page' + ${i}" th:text="${i}"></a>
							</li>
						<li>
							<a th:if="${currentPage} == ${totalpage}" href="javascript:void(0)" aria-label="Next">
								<span aria-hidden="true">&raquo;</span>
							</a>
							<a th:if="${currentPage} != ${totalpage}" th:href="@{'/userdata/page' + ${nextPage}}" aria-label="Next">
								<span aria-hidden="true">&raquo;</span>
							</a>
						</li>
					</ul>
				</nav>
			</div>
			<div><!-- row -->
			</div><!-- jumbotron -->
		</div> <!-- /container -->

		<!-- 用于添加文件的模态窗口 -->
		<div class="modal fade" id="addFile" tabindex="-1" role="dialog">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title">文件添加</h4>
					</div>
					<div class="modal-body">
						<p>说明信息...（上传注意事项等，后续补充）</p>
						<form id="form1" enctype="multipart/form-data" method="post" action="/userdata/upload" role="form">
							<div class="form-group">
								<label for="inputfile">请选择上传文件</label>
								<input type="file" id="inputfile" name="inputfile" />
							</div>
							<div class="form-group">
								<label for="name">请选择列分隔符</label>
								<select class="form-control" name="sign" id="sign" onchange="changesign(this.options[this.options.selectedIndex].value())">
									<option value=",">逗号(,)</option>
									<option value=";">分号(;)</option>
									<option value=" ">空格</option>
								</select>
							</div>
							<div class="modal-footer">
								<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
								<a th:if="${username}"><button type="submit" class="btn btn-info" onclick="alert('上传成功')" >上传</button></a>
								<a th:unless="${username}"><button class="btn btn-info" onclick="alert('请登录')">上传</button></a>
							</div>
						</form>
					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div><!-- modal fade-->
	</div>
</div>

<!--js文件-->
<script src="/js/jquery-2.1.1.min.js"></script>
<script src="/bootstrap/js/bootstrap.min.js"></script>
<script src="/js/delete.js"></script>
<script src="/js/sign.js"></script>
<!--<script src="/js/PagingManage.js"></script>-->
</body>
</html>
